<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„ä¾›åº”å•†</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="navbar">
    <div class="logo"><a href="index.html">[Logo] åŒ»è¯é‡‡è´­å¹³å°</a></div>
    <nav class="nav-links">
      <a href="upload.html">Excelå¯¼å…¥</a>
      <a href="result.html">æ‰¹é‡ç»“æœ</a>
      <a href="detail.html" class="opt-single">å•å“ç»“æœ</a>
    </nav>
  </header>

  <main>
    <h2>æˆ‘çš„ä¾›åº”å•†</h2>

    <div class="section">
      <div class="card">
        <p><strong>Aè¯ä¸š</strong> ï½œ ä¿¡ç”¨è¯„çº§ï¼šâ˜…â˜…â˜…â˜…â˜… ï½œ è”ç³»äººï¼šå¼ ç»ç† ï½œ ç”µè¯ï¼š135xxxx8888</p>
        <button class="btn-secondary btn-chat" data-sup="Aè¯ä¸š">ğŸ’¬ èŠå¤©</button>
        <button class="btn-secondary btn-inform" data-sup="Aè¯ä¸š">ğŸ“¨ é€šçŸ¥æŠ¥ä»·</button>
      </div>

      <div class="card">
        <p><strong>Bè¯å“æœ‰é™å…¬å¸</strong> ï½œ ä¿¡ç”¨è¯„çº§ï¼šâ˜…â˜…â˜…â˜†â˜† ï½œ è”ç³»äººï¼šæä¸»ç®¡ ï½œ ç”µè¯ï¼š136xxxx9999</p>
        <button class="btn-secondary btn-chat" data-sup="Bè¯å“æœ‰é™å…¬å¸">ğŸ’¬ èŠå¤©</button>
        <button class="btn-secondary btn-inform" data-sup="Bè¯å“æœ‰é™å…¬å¸">ğŸ“¨ é€šçŸ¥æŠ¥ä»·</button>
      </div>
    </div>

    <div class="return-home">
      <a href="index.html" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
    </div>
  </main>

  <!-- â”€â”€â”€ é€šç”¨èŠå¤©å¼¹çª— â”€â”€â”€ -->
  <div id="chatPopup" class="popup" style="display:none;">
    <div class="card" style="width:320px;max-height:70vh;display:flex;flex-direction:column;">
      <h3 id="chatTitle" style="margin-top:0;">ä¸ä¾›åº”å•†æ²Ÿé€š</h3>
      <div id="chatBody" style="flex:1;overflow-y:auto;border:1px solid #eee;padding:6px;margin-bottom:8px;"></div>
      <textarea id="chatInput" rows="2" placeholder="è¾“å…¥æ¶ˆæ¯â€¦" style="resize:none;"></textarea>
      <button class="btn" onclick="sendMsg()">å‘é€</button>
      <button class="btn-secondary" onclick="chatClose()">å…³é—­</button>
    </div>
  </div>

  <script src="js/common.js"></script>
  <script>
  // æ‰“å¼€èŠå¤©/é€šçŸ¥æŒ‰é’®é€»è¾‘
  document.addEventListener('click', e=>{
    if(e.target.classList.contains('btn-chat')){
      const sup = e.target.dataset.sup;
      document.getElementById('chatTitle').textContent = `ä¸ ${sup} æ²Ÿé€š`;
      document.getElementById('chatBody').innerHTML = ''; // TODO: æ‹‰å–å†å²æ¶ˆæ¯
      document.getElementById('chatPopup').style.display = 'flex';
    }
    if(e.target.classList.contains('btn-inform')){
      const sup = e.target.dataset.sup;
      alert(`å·²å‘ ${sup} å‘é€æŠ¥ä»·éœ€æ±‚ï¼ï¼ˆç¤ºä¾‹ï¼‰`);
      // TODO: fetch('/api/informQuote', {method:'POST', body: JSON.stringify({supplier:sup})})
    }
  });
  function chatClose(){ document.getElementById('chatPopup').style.display='none'; }
  function sendMsg(){
    const ta  = document.getElementById('chatInput');
    const msg = ta.value.trim();
    if(!msg) return;
    const body = document.getElementById('chatBody');
    body.innerHTML += `<div style="text-align:right;color:#2c7be5;">${msg}</div>`;
    body.scrollTop = body.scrollHeight;
    ta.value = '';
    // TODO: é€šè¿‡ WebSocket / fetch å‘é€ç»™æœåŠ¡å™¨
  }
  </script>
</body>
</html>